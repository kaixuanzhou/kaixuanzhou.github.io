---
layout: post
title:  使用github-page、jekyll搭建独立博客
date:   2017-04-23 15:41:20 +0800
categories: 技术分享
tag: interview
---

* content
{:toc}


    一直想搭建自己的独立博客，但这几年web前端技术处于井喷式发展，学习各种新技术、新标准都让自己有些分身乏术，搭建博客的事自然也就被自己扔到了爪哇国。
    
    最近换了新工作，有幸听新同事介绍到利用github-page来搭建独立博客，于是这事便重新拾了起来~


搭建独立博客需要什么
==========
1.成熟的博客系统
2.美观的博客页面
3.服务器或者空间
4.域名

了解到这几点后，我决定用jekyll+github-page来搭建一个独立博客

jekyll介绍
========
首先jekyll是一款静态博客生成工具，他有轻量级、上手快、方便快捷等特点。但
他没有与后台或数据库通讯的能力，如果需要评论等功能则需要借助第三方工具来完成。

使用jekyll来制作博客还有一个重要原因：就是最后，我们需要借助github-page来实现
发布到线上，而jekyll可以免费的部署到github上。


jekyll安装
========

1.安装ruby
--------

jekyll基于ruby来编译，所以我们需要先安装ruby。
windows下可以下载[安装文件](http://rubyinstaller.org/downloads/)。其他系统自行谷歌。

![安装界面]({{ '/styles/images/ruby-install.jpg' | prepend: site.baseurl  }})

一直点下一步安装，在这一步可以勾选第二个选项，自动将ruby命令加入到环境变量的Path里，
如果这里没有勾选的话，则需要手动将安装目录里的bin文件夹的路径，复制到环境变量里
的Path中。

完成上述步骤后，打开命令行，输入ruby -v,应能正确打印出ruby的版本号

2.安装RubyDevKit
--------------
DevKit是一个开发工具包，使用它，能够让ruby使用原生的C/C++扩展，后续我们安装jekyll，需要依赖此安装包。
同样是下载[安装文件](http://rubyinstaller.org/downloads/)，无脑下一步。

需要注意的是，你需要选择正确的版本，如果安装错了，后续安装jekyll时有可能会异常，
笔者在这里就掉进了这个坑，费了不少时间才爬出来。
正确的版本是需要和你安装的ruby版本相对应。

![选择devket的版本]({{ '/styles/images/devket.jpg' | prepend: site.baseurl  }})

根据ruby的版本号，32位/64位系统，来选择。目前有3个版本：

ruby1.8.7 到 1.9.3的devket安装包

ruby2.0以上，32位系统的devket安装包

ruby2.0以上，64位系统的devket安装包


运行安装包后，会将Devket解压到你指定的文件夹，
解压完成后，用命令行工具cd到此目录内，执行下面的命令

    ruby dk.rb init

执行后，会生成一个config.yml文件，我们用记事本打开这个文件

    # This configuration file contains the absolute path locations of all
    # installed Rubies to be enhanced to work with the DevKit. This config
    # file is generated by the 'ruby dk.rb init' step and may be modified
    # before running the 'ruby dk.rb install' step. To include any installed
    # Rubies that were not automagically discovered, simply add a line below
    # the triple hyphens with the absolute path to the Ruby root directory.
    #
    # Example:
    #
    # ---
    # - C:/ruby19trunk
    # - C:/ruby192dev
    #
    ---
    - E:/software/Ruby22

如果ruby是通过安装文件安装的，则最后一行如上，应当是指向ruby的安装目录，如果没有最后一行，
就手动添加便可。

保存。继续执行下面的命令,完成Devket的安装。

    ruby dk.rb install

3.安装Bundle 以及 使用Bundle安装github-pages环境
--------------------------------------

Bundle是一个ruby环境中的依赖管理器，可以自动下载完所有依赖的包，我们通过Bundle
可以在本地中搭建和GitHub-Page中完全一致的环境。

这样，在本地预览通过后，托管到GitHub中，就不至于出现因环境不同而出现的异常。

安装Bundle，非常简单。运行下面的命令即可。

    gem install bundle

安装成功后，在自己希望的位置，新建一个准备放我们博客内容的文件夹。
在此文件夹内，新建一个名叫Gemfile的文件，无后缀。添加如下内容。

    source 'https://ruby.taobao.org/'
    gem 'github-pages'

保存后，在命令行cd进此目录。执行命令：

    bundle install

执行此命令，会将github-pages所依赖的所有包，全部下载到本地。

如果将来github-pages的环境发生变化，我们只需执行一下更新命令，便能同步环境，十分方便

    bundle update

通过bundle的安装，自然也自动将jekyll安装好了，最后我们来执行运行命令

    jekyll serve

![运行结果]({{ '/styles/images/jekyll-serve.jpg' | prepend: site.baseurl  }})

运行结果中，显示出web服务的地址，我们在浏览器中，打开此地址 http://127.0.0.1:4000/

浏览器中仍是404提示，这是因为我们现在只是开启了服务，还未部署blog的内容。

至此，jekyll的服务安装完成，下面我们只需选一个自己喜欢的blog风格模板，便大功告成。

下载jekyll模板
==========
网上有大量的[jekyll模板](http://jekyllthemes.org/)，我们熟悉了jekyll后，也能自己写专属自己的风格模板。
写博客是分享内容为主，并不是单纯为了玩转jekyll，所以我就选了一个简单的模板，没有自己再费力气去造轮子。

选好模板后，我们将模板下载到本地，git clone 或者 直接下载zip压缩包

然后解压出来，将所有文件，复制到我们的博客文件夹中。

![博客文件]({{ '/styles/images/blog-files.jpg' | prepend: site.baseurl  }})

这样，我们再运行服务启动命令

    jekyll serve
    

现在再打开浏览器，输入服务地址，应当能出现，模板中的页面。

[撒花] 现在博客环境全部安装完毕。